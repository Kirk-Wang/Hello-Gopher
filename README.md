# Gopher

![Gopher](https://golang.org/doc/gopher/frontpage.png)

Go Programming Language æ‰«ç›²

go1.11.2

## è½¯ä»¶å¼€å‘äººå‘˜ç¡¬åŸºç¡€

ç›®çš„ï¼šæ³¨é‡**åŸºç¡€çŸ¥è¯†**å’Œ**æ€ç»´æ–¹å¼**

### linux æœºå™¨ä¸Šä½¿ç”¨ top å‘½ä»¤

* p é”® - æŒ‰ cpu ä½¿ç”¨ç‡æ’åº
* m é”® - æŒ‰å†…å­˜ä½¿ç”¨é‡æ’åº

### Mac ä¸‹ top å‘½ä»¤

* å…ˆè¾“å…¥ oï¼Œç„¶åè¾“å…¥ cpu åˆ™æŒ‰ cpu ä½¿ç”¨é‡æ’åºï¼Œè¾“å…¥ rsize åˆ™æŒ‰å†…å­˜ä½¿ç”¨é‡æ’åºã€‚

* è®°ä¸æ¸…äº†ï¼Œå¯ä»¥åœ¨ top çš„ç•Œé¢ä¸ŠæŒ‰ ?ï¼Œåœ¨å¼¹å‡ºçš„å¸®åŠ©ç•Œé¢ä¸­å³å¯çœ‹åˆ°ã€‚

### è„‘å›¾å¤‡æ¡ˆ

* [Go ç½‘ç»œæ’åº](./images/sort.png)
* [Go åŸºç¡€è¯­æ³•è„‘å›¾å›é¡¾](./images/Go1.png)

### Go å†…å»ºå®¹å™¨è„‘å›¾å›é¡¾

![Go å†…å»ºå®¹å™¨è„‘å›¾å›é¡¾](./images/Go2.png)

### Go é¢å‘â€œå¯¹è±¡â€

![Go é¢å‘â€œå¯¹è±¡â€](./images/Go3.png)

### Go é¢å‘æ¥å£

![Go é¢å‘æ¥å£](./images/Go4.png)

### Go å‡½æ•°å¼ç¼–ç¨‹

![Go å‡½æ•°å¼ç¼–ç¨‹](./images/Go5.png)

### Go é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†

![Go é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†](./images/Go6.png)

### Go æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜

![Go æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜](./images/Go7.png)

### Goroutine

![Goroutine](./images/Go8.png)

### Channel

![Channel](./images/Go9.png)

### httpåŠå…¶ä»–æ ‡å‡†åº“

![httpåŠå…¶ä»–æ ‡å‡†åº“](./images/Go10.png)

### çƒ­èº«ï¼šè¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢
              6 5

      (start) 0 1 0 0 0

              0 0 0 1 0

              0 1 0 1 0

              1 1 1 0 0

              0 1 0 0 1

              0 1 0 0 0(end)

![è¿·å®«çš„å¹¿åº¦ä¼˜å…ˆæœç´¢](./images/Go11.png)

### å®æˆ˜é¡¹ç›®

å¦‚ä½•åªåˆ©ç”¨Goè¯­è¨€ï¼Œæ¥å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ç¨‹åº(éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨^_^)ï¼Ÿ

![å®æˆ˜é¡¹ç›®](./images/Go12.png)

### å•ä»»åŠ¡ç‰ˆ

![å•ä»»åŠ¡ç‰ˆ](./images/Go13.png)

å•ä»»åŠ¡ç‰ˆç½‘ç»œåˆ©ç”¨ç‡ï¼ˆæ¯ç§’æ‰80å¤šK,å› ä¸ºæ˜¯ä¸€ä¸ªä¸€ä¸ªfetchï¼‰

![1.0](./images/1.0spider.png)

### å¹¶å‘ç‰ˆ

![å•ä»»åŠ¡ç‰ˆ](./images/Go14.png)

å¹¶å‘ç‰ˆç½‘ç»œåˆ©ç”¨ç‡ï¼ˆç¬é—´é£™åˆ°1Må¤šæ¯ç§’ï¼Œä½ ç½‘é€Ÿç¨å¾®å¿«ä¸€ç‚¹çš„è¯3ï¼Œ4Mæ¯ç§’æ˜¯å¾ˆæ­£å¸¸çš„ï¼‰

![1.0](./images/2.0spider.png)

æˆ‘è¿™é‡Œå¼€äº†100ä¸ª goroutine å»åšä»»åŠ¡ï¼Œçœ‹ä¸‹é¢ Go ç»™æˆ‘ä»¬å¼€äº† 13 çº¿ç¨‹è·‘è¿™ 100 ä¸ªåç¨‹ï¼Œä½†æ´»è·ƒçš„åªæœ‰3ï¼Œ4ä¸ª

å› ä¸ºæˆ‘çš„æœºå™¨å°±åªæœ‰4æ ¸ï¼ˆğŸ¤£ï¼‰ï¼Œå½“ç„¶è¿˜å¯ä»¥å¼€å¤§ä¸€ç‚¹æ¥æ¦¨å¹² CPU ğŸ¤£

![1.0](./images/2.0top.png)

### æ•°æ®å­˜å‚¨->Elasticsearch

![æ•°æ®å­˜å‚¨](./images/Go15.png)

### åˆ†å¸ƒå¼åˆæ¢

![åˆ†å¸ƒå¼åˆæ¢](./images/Go16.png)

### æ€»ç»“

![æ€»ç»“](./images/Go17.png)

---

## åŸºäº Go è¯­è¨€æ„å»ºä¼ä¸šçº§çš„ RESTful API æœåŠ¡


### é«˜å¯ç”¨ API æ„å»º

![é«˜å¯ç”¨ API æ„å»º](./images/RESTful/api-1.png)

### RESTful API

![RESTful API](./images/RESTful/api-2.png)

### APIæµç¨‹å’Œä»£ç ç»“æ„

![APIæµç¨‹å’Œä»£ç ç»“æ„](./images/RESTful/api-3.png)

### å¯åŠ¨ä¸€ä¸ªæœ€ç®€å•çš„ RESTful API æœåŠ¡å™¨

![å¯åŠ¨ä¸€ä¸ªæœ€ç®€å•çš„RESTful API æœåŠ¡å™¨](./images/RESTful/api-4.png)

### é…ç½®æ–‡ä»¶è¯»å–

![é…ç½®æ–‡ä»¶è¯»å–](./images/RESTful/api-5.png)

### è®°å½•å’Œç®¡ç† API æ—¥å¿—

![è®°å½•å’Œç®¡ç† API æ—¥å¿—](./images/RESTful/api-6.png)

### å®‰è£… MySQL å¹¶åˆå§‹åŒ–è¡¨

![å®‰è£… MySQL å¹¶åˆå§‹åŒ–è¡¨](./images/RESTful/api-7.png)

è¿è¡ŒMySQL

```sh
docker run --name mysql -v ~/dockerdata:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d -i -p 3306:3306 --restart=always  mysql:5.6

docker cp api-03/db.sql e60fcab227d4:/tmp/

docker exec -ti mysql bash

mysql -uroot -p123456

source  /tmp/db.sql
```

### åˆå§‹åŒ– MySQL æ•°æ®åº“å¹¶å»ºç«‹è¿æ¥

![åˆå§‹åŒ– MySQL æ•°æ®åº“å¹¶å»ºç«‹è¿æ¥](./images/RESTful/api-8.png)

### è‡ªå®šä¹‰ä¸šåŠ¡é”™è¯¯ä¿¡æ¯

![è‡ªå®šä¹‰ä¸šåŠ¡é”™è¯¯ä¿¡æ¯](./images/RESTful/api-9.png)

### è¯»å–å’Œè¿”å› HTTP è¯·æ±‚

![è¯»å–å’Œè¿”å› HTTP è¯·æ±‚](./images/RESTful/api-10.png)

### ç”¨æˆ·ä¸šåŠ¡é€»è¾‘å¤„ç†

![ç”¨æˆ·ä¸šåŠ¡é€»è¾‘å¤„ç†](./images/RESTful/api-11.png)

### HTTP è°ƒç”¨æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘

![HTTP è°ƒç”¨æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘](./images/RESTful/api-12.png)

### API èº«ä»½éªŒè¯

![API èº«ä»½éªŒè¯](./images/RESTful/api-13.png)

### ç”¨ HTTPS åŠ å¯† API è¯·æ±‚

![ç”¨ HTTPS åŠ å¯† API è¯·æ±‚](./images/RESTful/api-14.png)

API Server æ·»åŠ  HTTPS æ”¯æŒ

ç”Ÿæˆç§é’¥æ–‡ä»¶ï¼ˆserver.keyï¼‰å’Œè‡ªç­¾å‘çš„æ•°å­—è¯ä¹¦ï¼ˆserver.crtï¼‰

```sh
openssl req -new -nodes -x509 -out conf/server.crt -keyout conf/server.key -days 3650 -subj "/C=DE/ST=NRW/L=Earth/O=Random Company/OU=IT/CN=127.0.0.1/emailAddress=xxxxx@qq.com"
```

### ç”¨ Makefile ç®¡ç† API é¡¹ç›®

![ç”¨ Makefile ç®¡ç† API é¡¹ç›®](./images/RESTful/api-15.png)

### ç»™ API å‘½ä»¤å¢åŠ ç‰ˆæœ¬åŠŸèƒ½

![ç»™ API å‘½ä»¤å¢åŠ ç‰ˆæœ¬åŠŸèƒ½](./images/RESTful/api-16.png)

### ç»™ API å¢åŠ å¯åŠ¨è„šæœ¬

![ç»™ API å¢åŠ å¯åŠ¨è„šæœ¬](./images/RESTful/api-17.png)

### åŸºäº Nginx çš„ API éƒ¨ç½²æ–¹æ¡ˆ

![åŸºäº Nginx çš„ API éƒ¨ç½²æ–¹æ¡ˆ](./images/RESTful/api-18.png)

### API é«˜å¯ç”¨æ–¹æ¡ˆ

![API é«˜å¯ç”¨æ–¹æ¡ˆ](./images/RESTful/api-19.png)

### go test æµ‹è¯•ä½ çš„ä»£ç 

![go test æµ‹è¯•ä½ çš„ä»£ç ](./images/RESTful/api-20.png)

### API æ€§èƒ½åˆ†æ

![API æ€§èƒ½åˆ†æ](./images/RESTful/api-21.png)

### ç”Ÿæˆ Swagger åœ¨çº¿æ–‡æ¡£

![ç”Ÿæˆ Swagger åœ¨çº¿æ–‡æ¡£](./images/RESTful/api-22.png)

### API æ€§èƒ½æµ‹è¯•å’Œè°ƒä¼˜

![API æ€§èƒ½æµ‹è¯•å’Œè°ƒä¼˜](./images/RESTful/api-23.png)


## IRIS+XORM å®æˆ˜

![IRIS XORM å®æˆ˜](./images/iris+xorm1.png)

## é«˜å¹¶å‘ï¼Œé«˜æ€§èƒ½å®æˆ˜

### æŠ½å¥–ç³»ç»Ÿ

![æŠ½å¥–ç³»ç»Ÿ](./images/Lottery/lottery-1.png)

### å¸¸è§æŠ½å¥–æ´»åŠ¨

![å¸¸è§æŠ½å¥–æ´»åŠ¨](./images/Lottery/lottery-2.png)

### ç³»ç»Ÿè®¾è®¡å’Œæ¶æ„è®¾è®¡

![ç³»ç»Ÿè®¾è®¡å’Œæ¶æ„è®¾è®¡](./images/Lottery/lottery-3.png)

###  é¡¹ç›®æ¡†æ¶ä¸æ ¸å¿ƒä»£ç 

![é¡¹ç›®æ¡†æ¶ä¸æ ¸å¿ƒä»£ç ](./images/Lottery/lottery-4.png)

###  åå°åŠŸèƒ½å¼€å‘

![åå°åŠŸèƒ½å¼€å‘](./images/Lottery/lottery-5.png)

### åŸºäºmysqlçš„æŠ½å¥–åŠŸèƒ½å¼€å‘

![åŸºäºmysqlçš„æŠ½å¥–åŠŸèƒ½å¼€å‘](./images/Lottery/lottery-6.png)

### GOå®ç°åƒä¸‡çº§WebSocketæ¶ˆæ¯æ¨é€æœåŠ¡

![GOå®ç°åƒä¸‡çº§WebSocketæ¶ˆæ¯æ¨é€æœåŠ¡](./images/go-websocket.png)

## ä½¿ç”¨ GoLang æ„å»ºé«˜æ€§èƒ½ç½‘ç»œæ¸¸æˆæœåŠ¡å™¨

![ä½¿ç”¨ GoLang æ„å»ºé«˜æ€§èƒ½ç½‘ç»œæ¸¸æˆæœåŠ¡å™¨](./images/nano/nano-1.png)

